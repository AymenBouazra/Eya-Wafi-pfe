<app-header-body title="Ajouter une formation"></app-header-body>

<div class="container-fluid mt--7">
  <div class="row">
    <div class="col">
      <div class="card shadow">
        <div class="card-header border-0">
          <h3 class="mb-0">Ajouter une formation</h3>
        </div>
        <form *ngIf="trainingForm" [formGroup]="trainingForm" (ngSubmit)="onSubmit()" class="card-body">
          <div class="form-group">
            <label for="title">Titre</label>
            <input type="text" id="title" formControlName="title"
              [ngClass]="{ 'is-invalid': isSubmitted && trainingForm.get('title').errors }" class="form-control"
              placeholder="Titre de la formation">
            <div *ngIf="isSubmitted && trainingForm.get('title').errors?.required" class="text-danger">
              <small>Le titre est requis.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" formControlName="description"
              [ngClass]="{ 'is-invalid': isSubmitted && trainingForm.get('description').errors }" class="form-control"
              placeholder="Description de la formation"></textarea>
            <div *ngIf="isSubmitted && trainingForm.get('description').errors" class="text-danger">
              <small *ngIf="trainingForm.get('description').errors?.required">La description est requise.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="category">Catégorie</label>
            <input type="text" id="category" formControlName="category"
              [ngClass]="{ 'is-invalid': isSubmitted && trainingForm.get('category').errors }" class="form-control"
              placeholder="Catégorie">
            <div *ngIf="isSubmitted && trainingForm.get('category').errors?.required" class="text-danger">
              <small>La catégorie est requise.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="duration">Durée (heures)</label>
            <input type="number" id="duration" formControlName="duration"
              [ngClass]="{ 'is-invalid': isSubmitted && trainingForm.get('duration').errors }" class="form-control"
              placeholder="Durée en heures">
            <div *ngIf="isSubmitted && trainingForm.get('duration').errors?.required" class="text-danger">
              <small>La durée est requise.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="provider">Fournisseur</label>
            <input type="text" id="provider" formControlName="provider"
              class="form-control"
              placeholder="Fournisseur de la formation">
          </div>

          <div class="form-group">
            <label for="targetSkills">Compétences visées</label>
            <div class="pl-lg-4">
              <ng-select [items]="skillsList"
                bindLabel="title"
                bindValue="_id"
                [multiple]="true"
                [closeOnSelect]="false"
                formControlName="targetSkills"
                >
              </ng-select>
            </div>
          </div>

          <div class="form-group">
            <label for="recommendedFor">Métiers recommandés</label>
            <div class="pl-lg-4">
              <ng-select [items]="jobsList"
                bindLabel="title"
                bindValue="_id"
                [multiple]="true"
                [closeOnSelect]="false"
                formControlName="recommendedFor"
                >
              </ng-select>
            </div>
          </div>

          <div class="form-group form-check">
            <input type="checkbox" id="isActive" formControlName="isActive" class="form-check-input">
            <label for="isActive" class="form-check-label">Actif</label>
          </div>

          <button type="submit" [disabled]="isLoading" class="btn btn-primary">{{isLoading ? 'Enregistrement...' : 'Enregistrer'}}</button>
          <button type="button" class="btn btn-secondary" routerLink="/trainings">Annuler</button>
        </form>
      </div>
    </div>
  </div>
</div>
